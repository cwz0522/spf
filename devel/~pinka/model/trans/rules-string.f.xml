<?xml version="1.0" ?>
<f:forth xmlns:f="http://forth.org.ru/ForthML/"
  xmlns="http://forth.org.ru/ForthML/Rules/"
>
<!-- Aug.2007 -->
<!-- $Id$ -->

<f:comment> String constructing (to the current storage). Only within 'def'.</f:comment>

ALSO forthml-support

<transform name="rules-string-constructing">

<rule match="#text" test="STATE?"><!-- '@test' doesn't support yet -->
  NodeValue T-SLIT <m> S, </m>
</rule>

<rule match="f:ss" test="STATE?"><f:rem> substitute substring </f:rem>
  rules-default apply-rules <m> S, </m>
</rule>

<rule match="f:s" test="STATE?" ds=" -- c-addr u " ><m>
  HERE >R  <yield/>  HERE R> TUCK - 0 C,
  </m>
</rule>

</transform>

<rule match="f:ss" ds="-- ">
  <yield/>
</rule>

<rule match="f:s" ds="-- ">
  rules-string-constructing apply-rules
</rule>

PREVIOUS

<f:comment><!-- example -->
  <def name="ttt" ds=" a u -- a2 u2 ">
    <s>AAA[<ss/>]Z-<ss> 123. (D.) </ss></s>
  </def>

  `ooo ttt TYPE <!-- output: AAA[ooo]Z-123 -->
</f:comment>

</f:forth>
