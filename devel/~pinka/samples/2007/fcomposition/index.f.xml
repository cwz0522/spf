<?xml version="1.0" encoding="ASCII"?>
<forth xmlns="http://forth.org.ru/ForthML/"
     xmlns:r="http://forth.org.ru/ForthML/Rules/"
    xmlns:tc="http://forth.org.ru/ForthML/TC/"
>

<init>
  300 1024 * ALLOCATED TC-WL::DATASPACE!
  300 1024 * ALLOCATED TC-WL::CODESPACE!
  500 CELLS  ALLOCATED TC-WL::ASSUME-CS
</init>


<def name="req-host" ds=" i*x a u -- j*x ">
  forthml-hidden::I-NATIVE-FORCE <rem>( i*x xt )</rem>
  EXECUTE
</def>


<develop wordlist="TC-WL">

<r:extend transform="transformer-fml" >
  <include href="import-words.f.xml"/>
</r:extend>

<def name="(give-wordlist)" ds=" wid -- ">
  GET-CURRENT SWAP APPEND-WORDLIST
</def>


 WORDLIST DUP `FORTH-WL NAMING-WORDLIST- DUP PUSH-SCOPE  DUP SET-CURRENT
 DUP <const name="target-root"/>
 
 <rem> ( wid ) </rem>

<def name="give-forth" ds=" -- ">
  <lit>DUP</lit> (give-wordlist)
</def>

</develop>
 

 <rem> ( wid ) </rem>

 
<r:mode transform="TC-WL::transformer-fml">

  <tc:import from="TC-WL">
    req-host give-forth
    NEXT-LINE-STDIN  >NUMBER BASE HEX  . U. .S  OK
  </tc:import>

  <const name="FORTH-WL"/><rem>( wid -- ) </rem>
 
  <include href="carcase.f.xml"/>
  <include href="quit.f.xml"/>

  <init><rem> initiate the target system </rem>
    <rem> The host system and the target system are has a same code form! So we can execute a words from the target system.</rem>
    
    `TC-WL::VOC-LIST       req-host    @ VOC-LIST !
    `TC-WL::SAVE-STORAGE   req-host    RESTORE-STORAGE
 
    500 CELLS ALLOCATED ASSUME-CS
    FORTH-WL DUP SET-CURRENT PUSH-SCOPE
  </init>

</r:mode>


</forth>
