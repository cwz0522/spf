\ В текущем каталоге версия форт системы с float - 375073

Общее число слов - около 170.
Разница между размером системы с FLOAT и без FLOAT составляет около
9500 байт. Представьте - 9 кило по сравнению с масштабами Windows программ.

Резоны компиляции вместе с форт системой следующие - требуется подключение
ассемблера, требуется замена обработчика литерала

Что нужно чтобы `врастить` float в форт систему:

1. Вставить в конец файла compiler\spf_literal.f слово

: ?FLITERAL1 \ addr u -> ... 
  2DUP 2>R ['] ?SLITERAL2 CATCH ?DUP
  IF
    NIP NIP 2R>
    FABORT
    >FLOAT
    IF [COMPILE] FLITERAL DROP
    ELSE
       THROW
    THEN
  ELSE 2R> 2DROP
  THEN
;

2. Переписать в дир. src\float файлы floathi.f floatkern.f

3. Убедиться что вектор <FLOAT-INIT> находится перед float библиотекой

   Дело в том, что во floathi.f выделяется user буфер FLOAT-TIB, значит
   этот файл нужно вставлять до spf_init.f, но в floathi.f используется
   <FLOAT-INIT>, к-е описано в spf_init.f
   Если использовать по старой схеме - участки пула накладываются
   друг на друга 
   
   Короче, закомментируйте в spf_init.f строчки:
     VECT <FLOAT-INIT>
     ' NOOP (TO) <FLOAT-INIT>

   
4. В spf_init.f вместо строки ['] ?SLITERAL2 TO ?SLITERAL записать   
   ['] ?FLITERAL1 TO ?SLITERAL
   
5. В файле spf370.f вставить подключение файлов floathi.f и floatkern.f
   ДО подключения файла spf_literal.f и после (!) spf_defwords.f
   - например:

\ ==============================================================
\ Работа с числами с плавающей точкой

S" src\float\floatkern.f"            INCLUDED
S" src\float\floathi.f"              INCLUDED
   
Я это уже сделал, но описать необходимо, чтобы все знали :)
FORTHSIM компилируется уже этой модифицироанной версией.
